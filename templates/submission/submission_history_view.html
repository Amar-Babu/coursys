{% extends "submission/dashboard_student.html" %}
{% load submission_filters %}

{% block h1 %}Submission history for {{activity.name}}{% endblock %}

{% block breadcrumbs_extra %}
<li>&gt; <a href="">Submission History</a></li>
{% endblock %}


{% block content %}

<div>
 <ul class="add_nav">
 <li><a href="{% url submission.views.show_components course_slug=course.slug activity_slug=activity.slug%}" class="button">back</a></li>
{% if empty_component %}
    <li><a href ="{% url submission.views.add_submission course_slug=course.slug activity_slug=activity.slug%}" class="button">Submit now</a></li>
{% endif %}
</ul>
</div>



{% regroup submitted_component|dictsort:"component" by component as by_component %}
<div id="submission_history_view_container">
    {% for component in by_component %}
        <h2>{{component.grouper.title}}</h2>
        <table>
            <tr>
                <th>Time</th>
                {%if is_group%}
                    <th>Creator</th>
                {% endif %}
                <th>Download</th>
                <th>Size</th>
            </tr>
        {% for item in component.list %}
            <tr class="{% if forloop.counter0|divisibleby:2 %}row1{%else%}row2{%endif%}">
                <td>{{item.get_time}}</td>
                {%if is_group%}
                    <td>{{item.submission.get_derived_class.creator}}</td>
                {%endif%}
                <td>
                    {% ifequal item.get_type 'URL' %}
                        <img src="{{MEDIA_URL}}icons/attach.png" alt="download" /><a href="{% url submission.views.download_file course_slug=course.slug activity_slug=activity.slug userid=userid %}?type={{item.get_type}}&id={{item.id}}">Download File</a>
                    {% else%}
                        <img src="{{MEDIA_URL}}icons/attach.png" alt="download" /><a href="{% url submission.views.download_file course_slug=course.slug activity_slug=activity.slug userid=userid %}?type={{item.get_type}}&id={{item.id}}" target="_blank">Download File</a>
                    {% endifequal %}
                </td>
                <td>
                    {% if item.get_size %}
                        {{item.get_size_in_kb}} KB
                    {% else %}
                        --
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </table>
    {% endfor %}
</div>



{% endblock %}

