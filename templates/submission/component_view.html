{% extends "submission/base.html" %}

{% block h1 %}Submission for {{activity.name}}{% endblock %}

{% block breadcrumbs %}
<li><a href="http://www.sfu.ca/">SFU</a></li>
<li>&gt; <a href="http://www.cs.sfu.ca/">Computing Science</a></li>
<li>&gt; <a href="/">Course Management</a></li>
<li>&gt; <a href="/submission">Submission</a></li>
<li>&gt; <a href="{% url grades.views.course course_slug=course.slug %}">{{course.name}}</a></li>
<li>&gt; <a href="">{{activity.short_name}}</a></li>
{% block breadcrumbs_extra %}{% endblock %}
{% endblock %}

{% block content%}

<h3>Due Date: &emsp;&emsp;{{activity.due_date}}</h3>
<h3>Current Time: {% now "Y-m-d H:m:s" %}</h3>


<div id="my_submission_dashboard"><h1>My Submission</h1>
<ul class="add_nav">
    <li><a href ="submit/" class="button">New Submission</a></li>
    <li><a href ="history/" class="button">View History</a></li>
    <li><a href ="download/?user-id={{user}}" class="button" >Download All</a></li>
</ul>
</div>

<div id="form_container">
<div id="component_view_student_container">
    
{# <!-- pair<component, its latest submission> --> #}
{% for pair in submitted_pair %}
<h2>{{forloop.counter}}. {{pair.0.title}}</h2>
<h3>{{pair.0.get_type}} Component</h3>
<ul class="component_description">
    <li class="view"><label>Description:</label>{{pair.0.description}}</li>
    {% if pair.0.max_size %}<li class="view"><label>Max File Size:</label>{{pair.0.max_size}} KB</li>{% endif %}
    {% if pair.0.max_length %}<li class="view"><label>Max Length:</label>{{pair.0.max_length}} Characters</li>{% endif %}
</ul>

{% ifequal pair.1 None %}
    <div class="warningindicator">
        <img src="{{MEDIA_URL}}icons/exclamation.png" alt="warning" />
        You haven't made any submission to this component.
    </div>
{% else %}
    <div class="successindicator">
        <img src="{{MEDIA_URL}}icons/action_check.png" alt="check" />
        You have made submission to this component.
        <ul class="component_description">
            <li><label>Latest Submission: </label>{{pair.1.get_time}}</li>
            {% if pair.1.get_size %}
                <li><label>File Size:</label>{{pair.1.get_size_in_kb}} KB</li>
            {% endif %}
            {% ifequal pair.1.get_type 'URL' %}
                <li><label>URL:</label><a href="{{pair.1.get_url}}">{{pair.1.get_url}}</a></li>
            {% else%}
            {% ifequal pair.1.get_type 'PlainText' %}
                <li><label>Text:</label><pre>{{pair.1.text}}</pre></li>
            {% endifequal %}
            {% endifequal %}
            <li><a href="download/?type={{pair.1.get_type}}&user-id={{user}}&id={{pair.1.id}}" target="_blank">Download File</a></li>
        </ul>   
    </div>
    
{% endifequal %}


{% endfor %}
</div>
</div>

{% endblock %}