{% extends "submission/base.html" %}

{% block subbreadcrumbs %}<li>&gt; <a href="{% url grades.views.course_info course_slug=course.slug %}">{{course.name}}</a></li><li>&gt; <a href="{% url grades.views.activity_info course_slug=course.slug, activity_slug=activity.slug %}">{{activity.name}}</a></li><li>&gt; Submission</li>{% endblock %}

{% block h1 %}
    {%ifequal not_submitted_comp|length 0 %}
        Submission succeeded!
    {%else%}
        {% ifequal submitted_comp|length 0 %}
            Error: Nothing submitted
        {%else%}
            Warning: Error detected in your submission
        {% endifequal %}
    {%endifequal%}
{% endblock %}

{% block content %}
    <div id ="submission_error_container">
        {# If every component is submitted and has no error #}
        {%ifequal not_submitted_comp|length 0 %}
            <a href="{% url submission.views.show_components course_slug=course.slug activity_slug=activity.slug%}" class="button">continue</a>
        {# if there are errors in several submitted component#}
        {%else%}
            <h2>Errors in Submission</h2>
            <table>
            {% for data in component_list %}
                {%if data.form.errors %}
                    <tr>
                        <td class="column1">
                            {{ data.comp.title }}
                        </td>
                        <td class="column2">
                        {% for field in data.form %}
                           {{field.errors}}
                        {% endfor %}
                        </td>
                    </tr>
                {%endif%}
            {%endfor%}
            </table>
            {# if no component is submitted successfully #}
            {% ifequal submitted_comp|length 0 %}
            {% else %}
                <h2>Successfully Submitted Components</h2>
                    <table>
                        {% for component in submitted_comp %}
                            <tr>
                                <td class ="column1">
                                    {{component.component.title}}
                                </td>
                                <td class="column3">Submitted.</td>
                            </tr>
                        {% endfor %}
                    </table>
            {% endifequal %}
            <h2 class ="text">All components with error are not submitted.</h2>
            <br>
            <a href="{% url submission.views.show_components course_slug=course.slug activity_slug=activity.slug%}" class="button">OK</a>
        {%endifequal%}
    </div>
{% endblock %}
