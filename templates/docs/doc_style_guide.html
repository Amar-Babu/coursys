{% extends "base.html" %}


{% block title %}CourSys: Style Guide{% endblock %}
{% block h1 %}CourSys: Style Guide{% endblock %}

{% block headextra %}
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushPlain.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushDjango.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushXml.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript">
    SyntaxHighlighter.defaults['light'] = true;
    SyntaxHighlighter.all()
</script>
<link href="{{STATIC_URL}}syntaxhighlighter/styles/shCoreSFU.css" rel="stylesheet" type="text/css" />
<link href="{{STATIC_URL}}syntaxhighlighter/styles/shThemeSFU.css" rel="stylesheet" type="text/css" />
<link href="{{STATIC_URL}}style/styleguide.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block subbreadcrumbs %}<li><a href="{% url "dashboard.views.list_docs" %}">Docs</a></li><li>Style Guide</li>{% endblock %}


{% block actions %}
{% endblock %}

{% block content %}

<p>This style guide is a reference for common styles and standards unique to the Coursys website. 
</br>Please refer to the <a href="http://www.sfu.ca/clf/downloads.html">SFU Common Look and Feel</a> section for detailed information on the SFU theme including: colours, typography, grid layouts and any additional styling not included in this style guide.</p>

<h2 id="overview">Overview</h2>
<h3 id="templates">Templates</h3>
<p>All pages should extend from either "base.html" or "base-wide.html" found in the "courses/templates" directory. "base.html" has a left-hand column for the actions menu while "base-wide.html" allows the body to span the full width of the page content division as can be seen in the figures below. The wide format is typically used for pages with large tables. For all other pages, "base.html" is the recommended default template to extend from.</p> 
<figure class="double-image">
	<img src="/media/images/styleguide/base-sample.jpg" id="img_base" alt="Page extending from base.html">
	<img src="/media/images/styleguide/base-wide-sample.jpg" id="img_base-wide" alt="Page extending from base-wide.html"> 
	<figcaption>Left: Template extending from "base.html"; Right: Template example from "base-wide.html"</figcaption>
</figure>

<p>There are many built-in Django template tags used but here is a sample setup for a basic page:</p>
<pre class="brush: django">
	{% templatetag openblock %} extends "base.html" {% templatetag closeblock %}

	{% templatetag openblock %} block title {% templatetag closeblock %} Title {% templatetag openblock %} endblock {% templatetag closeblock %}
	{% templatetag openblock %} block h1 {% templatetag closeblock %} Title {% templatetag openblock %} endblock {% templatetag closeblock %}

	{% templatetag openblock %} block headextra {% templatetag closeblock %}
		...
	{% templatetag openblock %} endblock {% templatetag closeblock %}

	{% templatetag openblock %} block subbreadcrumbs {% templatetag closeblock %}
		...
	{% templatetag openblock %} endblock {% templatetag closeblock %}

	{% templatetag openblock %} block actions {% templatetag closeblock %}
		...
	{% templatetag openblock %} endblock {% templatetag closeblock %}

	{% templatetag openblock %} block content {% templatetag closeblock %}
		...
	{% templatetag openblock %} endblock {% templatetag closeblock %}
</pre>

<h3 id="Naviation">Navigation</h3>
<figure>
	<img src="/media/images/styleguide/navigation.jpg" id="img_navigation" alt="Navigation Highlights" height="60%" width="60%">
	<figcaption>Highlights: Breadcrumbs (pink), Coursys header (green), Course dropdown menu (purple), Actions menu (blue)</figcaption>
</figure>

<p>The main source of navigation within Coursys is breadcrumbs. All pages should have breadcrumbs for navigation near the top of the page. The base templates start off the breadcrumbs with the Coursys home page. Subsequent links are inserted within the subbreadcrumb block in individual templates. Links also tend to be generated using url tags whenever possible. For example,</p>
<pre class="brush: django">
	{% templatetag openblock %} block subbreadcrumbs {% templatetag closeblock %}
		<li><a href="{% templatetag openblock %} url &quot;dashboard.views.list_docs&quot; {% templatetag closeblock %}">Docs</a></li><li>Style Guide</li>
	{% templatetag openblock %} endblock {% templatetag closeblock %}
</pre>

<p>Secondary sources of navigation can be found within the header. Clicking on "Coursys" will return the user to the Coursys home page. Hovering over "Courses" will reveal a dropdown of related courses in recent semesters. Clicking on a course from this menu will direct the user to the course page.</p>

<h3 id="forms">Forms</h3>
<p>All forms are outputted using <code>as_dl</code> found in "courses/dashboard/templatetags/form_display.py". There are a few variations which include the following:</p>
<table>
	<tr>
		<td><code>as_dl_safe</code></td>
		<td>Like <code>as_dl</code>, but assumes helptext is a safe string</td>
	</tr>
	<tr>
		<td><code>as_dl_excludefields</code></td>
		<td>Like <code>as_dl</code>, but allows excluding some fields with filter argument</td>
	</tr>
	<tr>
		<td><code>as_dl_includefields</code></td>
		<td>Like <code>as_dl</code>, but allows including some fields with filter argument
		    <code>Hide helptext</code></td>
	</tr>	
	<tr>
		<td><code>as_dl_noreq</code></td>
		<td>Like <code>as_dl</code>, but no footer message is required</td>
	</tr>
	<tr>
		<td><code>as_dl_inline</code></td>
		<td>Like <code>as_dl_noreq</code>, but gives the attribute <code>formclass="dlform inline"</code></td>
	</tr>
</table>

<p>A Django form object only outputs its own fields so additional html tags are needed in the template. Here is an example:</p>
<pre class="brush: django">
	<form action="{% templatetag openblock %} url &quot;grades.views.new_message&quot; course_slug=course.slug {% templatetag closeblock %}" method="post" enctype="multipart/form-data">
		{% templatetag openblock %} csrf_token {% templatetag closeblock %}
		<fieldset>
			{% templatetag openvariable %} form|as_dl {% templatetag closevariable %} 
		</fieldset>
		<p><input class="submit" type="submit" value="Send" /></p>
	</form>
</pre>

<p>The form action is generated in the same manner as breadcrumb links. For this particular example, an additional slug is needed. Slugs provide a way to generate a valid url. It replaces all spaces with hyphens and capital letters with small letters given a title or other piece of data.</p>

<p>If the form includes uploaded files, include <code>enctype="multipart/form-data"</code> in the form element. For security, <code>{% templatetag openblock %} csrf_token {% templatetag closeblock %}</code> sends a random key in both cookie and form data to prevent third party websites from getting the site's cookies. Please include the csrf token for protection. 

<h3 id="tables">Tables</h3>
<p>Tables can be classified into two categories: data tables and display tables. Data tables tend to be larger and have their key values listed in the first row. These are commonly used for displaying grades, class lists and course activities. Data tables also have features such as sorting, filtering and searching. Display tables tend to be smaller and have their key values listed in the first column. Each course page will have a display table showing course information. </p>

<p> To enable different features, javascript needs to be added to the <code>headextra</code> block. It is preferable to keep all javascript in a separate file especially if the script can be reused. Below is an example of a script for datatables:</p>
<pre class="brush: django">
{% templatetag openblock %} block headextra {% templatetag closeblock %} 
<script type="text/javascript">
	$(document).ready(function() {
	  $('#members').dataTable( {
	    'bPaginate': false,
	    'bInfo': false,
	    'bLengthChange': false,
	    "bJQueryUI": true,
	  } );
	} );
</script>
{% templatetag openblock %}  endblock {% templatetag closeblock %} 
</pre>
<p>For a list of different features and initialisation options, please see: <a href="http://datatables.net/ref">http://datatables.net/ref</a></br>For additional information on the plug-in used for datatables, please see: <a href="https://datatables.net/">https://datatables.net/</a></p>

<h3 id="buttons">Buttons & Icons</h3>
<p>Most icons are vector icons used to emphasize important action items on pages like the main dashboard. These vector icons are obtained from Font Awesome, a free collection of scalable vector icons that can be customized with CSS. Here's an example of how to incorporate Font Awesome icons:</p>
<pre class="brush: html">
	<i class="fa fa-li fa-calendar"></i>
</pre>
<p>The above example outputs an icon that looks like a calendar. To change the icon, simply modify the class and replace <code>fa-calendar</code> with any other Font Awesome icon reference. For additional icon references, please see: <a href="http://fortawesome.github.io/Font-Awesome/icons/"/>http://fortawesome.github.io/Font-Awesome/icons/</a></p>
<p>Aside from the Font Awesome vector icons, there are also submit buttons which are automatically styled through <code>main.css</code>. These buttons are used to submit forms or release grades from course pages. Submit buttons should be wrapped in a paragraph tag within a form. Here is an example:</p>
<pre class="brush: django">
	<form action="{% templatetag openblock %} url &quot;dashboard.views.news_config&quot; {% templatetag closeblock %}" method="post">
		{% templatetag openblock %} csrf_token {% templatetag closeblock %}
	    {% templatetag openblock %} for field in form.visible_fields {% templatetag closeblock %}
	        <div class="field">
	            {% templatetag openvariable %} field {% templatetag closevariable %}
	            {% templatetag openvariable %} field.help_text {% templatetag closevariable %}
	            {% templatetag openvariable %} field.errors {% templatetag closevariable %}
	        </div>
	    {% templatetag openblock %} endfor {% templatetag closeblock %}
	    <p><input type="submit" value="Update Settings" /></p>
	</form>
</pre>

<h3 id="code">Code</h3>
<p>When adding to this style guide, use syntaxhighlighter to highlight any examples of code. Syntaxhighlighter has a variety of brushes for different types of syntax. To use syntaxhighlighter, insert your code within preformatted tags and set the class to a brush matching the syntax of your code.</p>
<pre class="brush: html">
	<pre class="brush: python">
		
		... Insert python code
	</pre>
</pre>
<p>Also, don't forget to include the following stylesheets and corresponding brush scripts in the head:</p>
<pre class="brush: html">
	{% templatetag openblock %} block headextra {% templatetag closeblock %}
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shCore.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushPython.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushPlain.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushDjango.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushXml.js"></script>
		<script type="text/javascript" src="{{STATIC_URL}}syntaxhighlighter/scripts/shBrushJScript.js"></script>
		<script type="text/javascript">
		    SyntaxHighlighter.defaults['light'] = true;
		    SyntaxHighlighter.all()
		</script>
		<link href="{{STATIC_URL}}syntaxhighlighter/styles/shCoreSFU.css" rel="stylesheet" type="text/css" />
		<link href="{{STATIC_URL}}syntaxhighlighter/styles/shThemeSFU.css" rel="stylesheet" type="text/css" />
	{% templatetag openblock %} endblock {% templatetag closeblock %}
</pre>
<p>Note: You may need to include additional brushes for different types of syntax.<p>

<h2 id="legacy">Legacy Code</h2>
The following sections describe legacy code that should be either removed or modified follow the current iteration. 
<h3 id="containers">Containers</h3>
<p>Containers are divisions of the page content for specific purposes. They can be identified as a <code>div</code> with one of the following classes:</p>
<table>
	<tr>
		<td>form_container</td>
		<td><code>div</code> containing a form</td>
	</tr>
	<tr>
		<td>table_container</td>
		<td><code>div</code> containing a table</td>
	</tr>
	<tr>
		<td>datatable_container</td>
		<td><code>div</code> containing a larger data table</td>
	</tr>
	<tr>
		<td>semesters-container</td>
		<td></td>
	</tr>
	<tr>
		<td>submission_error_container</td>
		<td></td>
	</tr>
	<tr>
		<td>submission_history_view_container</td>
		<td></td>
	</tr>
</table>
{% endblock %}
