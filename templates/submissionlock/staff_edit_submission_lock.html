{% extends "grades/base.html" %}
{% load grade_student %}

{% block title %}{% endblock %}
{% block h1 %}{% endblock %}

{% block headextra %}
<script type="text/javascript">
$(document).ready(function() {
    $("#id_lock_date_0").datepicker({ buttonImageOnly: true, buttonImage: '{{MEDIA_URL}}images/grades/calendar.png',
                                changeMonth: true, changeYear: true,
                                dateFormat: 'yy-mm-dd', showOn: 'button'});
    
    if($("input[name=lock_status]:checked").val() != 'lock_pending'){
        $("#div_id_lock_date").parent().addClass("hidden");
    }

    $("input[name=lock_status]").click(function(){
        if($("input[name=lock_status]:checked").val() == 'lock_pending'){
            $("#div_id_lock_date").parent().removeClass("hidden");
        } else {
            $("#div_id_lock_date").parent().addClass("hidden");
        }
    });
});
</script>
{% endblock %}

{% block subbreadcrumbs %}
<li><a href="{% url grades.views.course_info course_slug=course.slug %}">&gt; {{course.name}}</a></li>
<li><a href="{% url grades.views.activity_info course_slug=course.slug activity_slug=activity.slug %}">&gt; {{activity.name}}</a></li>
<li><a href="{% url submissionlock.views.submission_lock course_slug=course.slug activity_slug=activity.slug %}">&gt; Activity Lock</a></li>
<li>&gt; {{userid}}</li>
{% endblock %}

{% block content %}
    <div class="form_container">
        <form action="{% url submissionlock.views.staff_edit_submission_lock course_slug=course.slug activity_slug=activity.slug userid=userid %}" enctype="multipart/form-data" method="post">{% csrf_token %}
            <fieldset>
            <legend>Edit/Add Submission Lock for {{userid}}</legend>
            {{ form.non_field_errors }}
            <br>
                {{form.lock_status|activity_field}}
                {{form.lock_date|activity_field}}
            <p><input type="submit" class="submit" value="Submit" /></p>
            </fieldset>
        </form>
    </div>
{% endblock %}