{% extends "grades/base.html" %}

{% block h1 %}Course Information{% endblock %}

{% block headextra %}
<script type="text/javascript">
    $(document).ready(function() {
        // add button style
        $('.redbutton').mousedown(
            function(){ 
		$(this).addClass("redbutton_onclick"); 
            }
        )
        // add button style
        $('.redbutton').mouseup(
            function(){ 
		$(this).removeClass("redbutton_onclick"); 
            }
        )
        // activate dataTable ui
	oTable = $('#activities').dataTable({
		"bJQueryUI": true,
		"sPaginationType": "full_numbers",
                "iDisplayLength" : 50
	});
    });
</script>
{% endblock %}

{% block breadcrumbs_extra %}
<li>&gt; <a href="{% url grades.views.course course_slug=course.slug %}">{{ course.name }}</a></li>
{% endblock %}


{% block content %}
<div id="table_container">
    <table class="info">
        <tbody>
            <tr>
                <th>Subject</th>
                <td>
                    {{ course_info.subject }}
                </td>
            </tr>
            <tr>
                <th>Catalog Number</th>
                <td>
                    {{ course_info.number }}
                </td>
            </tr>
            <tr>
                <th>Section</th>
                <td>
                    {{ course_info.section }}
                </td>
            </tr>
            <tr>
                <th>Semester</th>
                <td>
                    {{ course_info.semester }}
                </td>
            </tr>
            <tr>
                <th>Title</th>
                <td>
                    {{ course_info.title }}
                </td>
            </tr>
            <tr>
                <th>Campus</th>
                <td>
                    {{ course_info.campus }}
                </td>
            </tr>
            <tr>
                <th>Instructor(s)</th>
                <td>
                    {% for instructor in course_info.instructor_list %}
                    {{ instructor.name }} (<a href="mailto:{{ instructor.email }}">{{ instructor.email }}</a>){% if not forloop.first %},{% endif %}
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>TA(s)</th>
                <td>
                    {% for ta in course_info.ta_list %}
                    {{ ta.name }} (<a href="mailto:{{ ta.email }}">{{ ta.email }}</a>){% if not forloop.first %},{% endif %}
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Grade Approver(s)</th>
                <td>
                    {% for grade_approver in course_info.grade_approver_list %}
                    {{ grade_approver.name }} (<a href="mailto:{{ grade_approver.email }}">{{ grade_approver.email }}</a>){% if not forloop.first %},{% endif %}
                    {% endfor %}
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div id="activity_container">
    <h2>Course Activities</h2>
    <a class="redbutton" href="{% url grades.views.add_numeric_activity course_slug=course.slug %}">Add Activity</a>
    <br/>
    <table class="display" id="activities">
        <thead>
            <tr>
                <th>Activity</th>
                <th>Percentage</th>
                <th>Status</th>
                <th>Due Date</th>
            </tr>
        </thead>
        <tbody>
            {% for activity in activities %}
            <tr>
                <td>
                    <strong>
                        <a href="{% url grades.views.activity_info course_slug=course.slug activity_slug=activity.slug %}">{{ activity.name }}</a>
                    </strong>
                    <div class="row-actions">
                        <span><a href="{% url grades.views.activity_info course_slug=course.slug activity_slug=activity.slug %}">Info</a> | </span>
                        <span><a href="#">Mark</a> | </span>
                        <span><a href="{% url grades.views.edit_activity course_slug=course.slug activity_slug=activity.slug %}?from_page={{ from_page }}">Edit</a> | </span>
                        <span><a href="{% url grades.views.delete_activity_review course_slug=course.slug activity_slug=activity.slug %}">Delete</a></span>
                    </div>
                </td>
                <td>
                    {{ activity.percent }}
                </td>
                {% ifequal activity.status 'RLS' %}
                <td class="green">
                    {{ activity.get_status_display }}
                </td>
                {% endifequal %}
                {% ifequal activity.status 'URLS' %}
                <td class="red">
                    {{ activity.get_status_display }}
                </td>
                {% endifequal %}
                {% ifequal activity.status 'INVI' %}
                <td class="grey">
                    {{ activity.get_status_display }}
                </td>
                {% endifequal %}
                <td>{{ activity.due_date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
