{% extends "base.html" %}
{% block title %}TA Contracts{% endblock %}
{% block h1 %}TA Contracts{% endblock %}

{% block subbreadcrumbs %}<li>&gt; TA Contracts</li>{% endblock %}

{% block headextra %}
<script type="text/javascript">
//<![CDATA[
    $(document).ready(function() {
    	//setting post_slug
    	$('#submit').click(function(){
    		$('#create').attr("href","/ta/contracts/" + $('#posting').val() + "/new") 
    	})
    });
    
//]]>
</script>
<style type="text/css">
   div#ta_new_con {
		overflow: hidden;
		white-space: nowrap;
		width: 43%
}
</style>

{% endblock %}

{%block content%}
{%if contracts %}
<div class="datatable_container">
<table class="display">
  <thead>
  	<tr>
  		<th scope="col">Applicant</th>
  		<th scope="col">Posting</th>
  		<th scope="col">Deadline</th>
  		<th scope="col">View</th>
  		<th scope="col">Edit</th>
  	</tr>
  </thead>
  <tbody>
  {% for contract in contracts %}
  <tr>
  	<td>{{ contract.applicant }}</td>
  	<td>{{ contract.ta_posting }}</td>
  	<td>{{ contract.deadline }}</td>
  	<td><a href="{% url ta.views.view_contract contract_id=contract.id%}">View</a></td>
  	<td><a href="{% url ta.views.edit_contract post_slug=contract.ta_posting.slug contract_id=contract.id%}">Edit</a></td>
  </tr>
  {% endfor %}
  </tbody>
</table>
</div>


{%else%}
	<p>No contracts yet</p>
{%endif%}

<div id="ta_new_con">
<h1>New Contract</h1>
<form>
	<select name="posting" id="posting">
		{% for post in postings %}
		<option value="{{post.slug}}">{{post}}</option>
		{% endfor %}
	</select>
	<a id="create" href="" style="height:0"><button type="button" class="submit" id="submit">Create</button></a>
	<div class="helptext">Select the associated unit/semester</div>
	
</form>
</div>
{%endblock content%}
