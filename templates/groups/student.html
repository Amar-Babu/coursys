{% extends "base.html" %}

{% block title %}Group Management{% endblock %}

{% block h1 %}Group Management{% endblock %}

{% block content %}
<script language="javascript" type="text/javascript" src="/media/js/groups/main.js">
</script>
<div id="groupcontainer">
<div id="grouplist">
	<h1>Group list</h1>
	{% for entry in grouplist %}
		<p>{{ entry }}</p>&nbsp;
		{% if group %}
		<a href="{% url groups.views.join course_slug=course_slug,group_slug=entry.slug %}" onclick="return firm()">
		{% else %}
		<a href="{% url groups.views.join course_slug=course_slug,group_slug=entry.slug %}">
		{% endif %}
		Join</a>
	{% endfor %}
	
	{% if group %}
	<a href="{% url groups.views.create course_slug=course_slug %}" onclick="return firm()">
	{% else %}
	<a href="{% url groups.views.create course_slug=course_slug %}">
	{% endif %}
	Create a group</a><br />
	
	{% for entry in groups %}
		{% if not entry.confirmed %}
		<div id="invited">*You have been invited to join group {{ entry }}. <a href="joinconfirm/">Confirm</a>.</div><br />
		{% endif %}
	{% endfor %}
</div>

<div id="groupmembership">
	{% if group %}
		<h1>Group I belong to:</h1>
		<p>{{ group }}.</p>
		<h2>Members:</h2>
		{% for entry in memberlist %}
			<p>{{ entry.student.person.first_name }} {{ entry.student.person.last_name }}
			{% ifequal group.manager entry %}
				(manager)
			{% endifequal %}
			</p>
		{% endfor %}
		<a href="invite/">Invite a member</a>
		<a href="changemanager">Change/Add manager</a>
	{% else %}
		<p>You don't belong to any group currently in this course.</p>
	{% endif %}
</div>
</div>
{% endblock %}
