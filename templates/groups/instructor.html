{% extends "base.html" %}

{% block title %}{{course.name}} Groups{% if activity %} for {{activity.name}}{% endif %}{% endblock %}
{% block h1 %}{{course.name}} Groups{% if activity %} for {{activity.name}}{% endif %}{% endblock %}

{% block subbreadcrumbs %}<li>&gt; <a href="{% url grades.views.course_info course_slug=course.slug %}">{{ course.name }}</a></li>{% if activity %}<li>&gt; <a href="{% url groups.views.groupmanage course_slug=course.slug %}">Groups</a></li><li>&gt; for {{activity.name}}</li>{% else %}<li>&gt; Groups</li>{% endif %}{% endblock %}

{% block content %}
{% if not activity %}
  <p>
  See groups for only: {% for a in activities %}
  <a href="{% url groups.views.groupmanage course_slug=course.slug activity_slug=a.slug %}">{{ a.name }}</a>{% if forloop.last %}{% else %}, {% endif %}
  {% endfor %}
{% endif%}
</p>
<h2 id="current">Current Groups</h2>
<div id="grouplist">
  {% if groupList %}
  {% for info in groupList %}
  <h3 id="info.group.slug">{{ info.group.name }}</h3>
  <p>For {% for activity in info.activities %}{{ activity.name }}{% if forloop.last %}{% else %}, {% endif %}{% endfor %}</p>
          <ul>
              {% for m in info.unique_members %}
              <li>{{ m.member.person.name }}, {{ m.member.person.userid }} {% if not m.confirmed %}(unconfirmed){% endif %}
              {% if m.missing %}(not for 
              {% for a in m.missing %}
              {{ a.name }}{% if forloop.last %}){% else %}, {% endif %}
              {% endfor %}
              {% endif %}
              </li>
              {% endfor %}
          </ul>
  <p>[<a href="{% url groups.views.change_name course_slug=course.slug group_slug=info.group.slug %}">Change Name</a> |
          <a href="{% url groups.views.assign_student course_slug=course.slug group_slug=info.group.slug %}">Add Student</a> |
          <a href="{% url groups.views.remove_student course_slug=course.slug group_slug=info.group.slug %}">Remove Student</a>]</p>
  {% endfor %}

  {% else %}
    <p class="empty">There are currently no groups in this course offering</p>
  {% endif %}  
	
<h2 id="nogroup">Students not in any group</h2>

  {% if studentsNotInGroup %}
    <ul>
    {% for student in studentsNotInGroup %}
      <li>{{student.person.name}}, {{student.person.userid}}</li>
      {% endfor %}
    </ul>
  {% else %}
  <p class="empty">None.</p>
  {% endif %}
  </div>
  <p>
    <a class="button" href="{% url groups.views.create course_slug=course.slug %}">New Group</a>
  </p>
{% endblock %}
