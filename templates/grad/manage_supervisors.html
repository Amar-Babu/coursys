{% extends "base.html" %}
{% load markup %}
{% load mobile_tags %}
{% load form_display %}

{% block actions %}
<div id="actions">
	<h2>Actions</h2>
	<ul>
		<li>
			<a href="{% url grad.views.view_all grad_slug=grad.slug %}">View All Info</a>
		</li>
		<li class="newsec">
			<a href="{% url grad.views.manage_academics grad_slug=grad.slug %}">Manage Academics</a>
		</li>
		<li>
			<a href="{% url grad.views.manage_requirements grad_slug=grad.slug  %}">Manage Requirements</a>
		</li>
		<li>
			<a href="{% url grad.views.manage_status grad_slug=grad.slug  %}">Manage Status</a>
		</li>
	</ul>
</div>
{% endblock %}

{% block title %}{{grad.person.name}}: Committee Members{% endblock %}
{% block h1 %}{{grad.person.name}}: Committee Members{% endblock %}

{% block subbreadcrumbs %}
<li>&gt; <a href="{% url grad.views.index %}">Grad</a></li>
<li>&gt; <a href="{% url grad.views.view_all grad_slug=grad.slug%}">{{grad.person.name}}, {{grad.program.label}}</a></li>
<li>&gt; Committee Members</li>
{% endblock %}

{% block headextra %} <script type="text/javascript" src="{{MEDIA_URL}}js/grad.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		$('#supervisors').dataTable({
			'bPaginate': false,
			"bJQueryUI" : true,
			"aaSorting" : [[0, "asc"]],
		});
	});

</script>
{% endblock %}

{% block content %}
<div class="table_container">
	<table class="info">
		<tbody>
			{% for field, value in gp %}
			<tr>
				<th><label>{{field}} :</label></th>
				<td> {{ value }} </td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>


<div class="datatable_container">
	<table class="display" id="supervisors">
		<thead>
			<tr>
				<th scope="col">Type</th>
				<th scope="col">Person</th>
				<th scope="col">Since</th>
				<th scope="col">Actions</th>
			</tr>
		</thead>
		<tbody>
			{% for s in supervisors %}
			<tr>
				<td>{% if s.removed %}<del><span class="sort">{{s.type_order}}</span>{% else %}<span class="sort">{{s.type_order|add:"9"}}</span>{% endif %}{{s.get_supervisor_type_display}}{% if s.removed %}</del>{% endif %}</td>
				<td>{% if s.removed %}<del>{% endif %}{% if s.supervisor %}{{s.supervisor}}{% else %}{{s.external}}{% endif %}{% if s.removed %}</del>{% endif %}</td>
				<td><span class="sort">{{s.created_at.isoformat}}</span>{{s.created_at|date}}
					{% if s.removed %}&ndash; {{s.updated_at|date}}{% endif %}
				</td>
				<td class="miniaction">{% if not s.removed %}<form action="{% url grad.views.remove_supervisor grad_slug=grad.slug sup_id=s.id %}" method="post">{% csrf_token %}<p class="actionbutton">
                <input type="submit" value="remove" onclick="return confirmSubmit('remove this committee member')" />
				</p></form>{% endif %}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

<div id="form_container">
	<form method="post" action="">{% csrf_token %}
		<fieldset>
			<legend>Add Committee Member</legend>
			<p>Enter only an internal or enter an external person.</p>
			{{ form|as_dl }}
			<span id="form_btns">
				<input class="submit" type="submit" value="Add" />
			</span>
		</fieldset>
	</form>
	<a class="button" href="{% url grad.views.view_all grad_slug=grad.slug %}">Cancel</a>
</div>

{% endblock %} 