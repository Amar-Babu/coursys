{% extends "base.html" %}
{% load markup %}

{% block title %}Course Management System{% endblock %}
{% block h1 %}Course Management System{% endblock %}

{% block breadcrumbs %}<li><a href="http://www.sfu.ca/">SFU</a></li><li>&gt; Course Management System</li>{% endblock %}

{% block actions %}
<div id="actions">
    <h2 class="heading">Actions</h2>
    <ul>
    <li><a href="{% url dashboard.views.news_list %}">All News Items</a></li>

    {% if 'FAC' in roles or 'SESS' in roles or 'COOP' in roles %}<li><a href="{% url planning.views.instructor_index %}">Teaching Preferences</a></li>{% endif %}
    {% if 'PLAN' in roles %}<li><a href="{% url planning.views.admin_index %}">Course Planning</a></li>{% endif %}
    {% if 'PLAN' in roles %}<li><a href="{% url planning.views.semester_plan_index %}">Semester Plans</a></li>{% endif %}
    {% if 'DISC' in roles %}<li><a href="{% url discipline.views.all_cases %}">Discipline Cases</a></li>{% endif %}
    {% if 'SYSA' in roles %}<li><a href="{% url coredata.views.sysadmin %}">System Administration</a></li>{% endif %}
    </ul>
</div>
{% endblock %}

{% block content %}
{% if news_list%}
<div id="newsitems">
<h2>Latest news</h2>
  {% for news in news_list %}
    <div class="newsitem">
   	{%if news.url%}
   	 	<h3>{{news.course.name}}: <a href="{{news.url}}">{{news.title}}</a></h3>
   	{%else%}
   		<h3>{{news.course.name}}: {{news.title}}</h3>
   	{% endif %}
    <div class="newsdate">{{news.published|date:'r'}}</div>
    <div class="newscontent">{{news.content_xhtml}}</div>
    </div>
  {% endfor %}
   
</div>
{% endif %}

{% regroup memberships by offering.semester as by_semester %}
{% for semester in by_semester %}
  <h2 id="semester-{{semester.grouper.name}}">{{semester.grouper.label}}</h2>
  <ul>
  {% for membership in semester.list %}
    <li><a href="{{membership.offering.get_absolute_url}}">{{membership.offering.name}}</a></li>
  {% endfor %}
  </ul>
{% endfor %}

{% endblock %}
