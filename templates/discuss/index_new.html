{% extends "base-wide.html" %}
{% load static %}

{% block title %}{{ offering.subject }} {{ offering.number }} Discussion{% endblock %}
{% block h1 %}{{ offering.subject }} {{ offering.number }} Discussion{% endblock %}

{% block headextra %}
<script nonce="{{ CSP_NONCE }}">
var discussion_api_url = "{% url 'api:DiscussionTopics' course_slug=offering.slug %}";
var discussion_base_url = "{% url 'offering:discussion:discussion_index' course_slug=offering.slug %}";
</script>
{% include 'pages/markup_view_head.html' %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js" integrity="sha256-chlNFSVx3TdcQ2Xlw7SvnbLAavAQLO0Y/LBiWX04viY=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.5.1/vue-resource.min.js" integrity="sha256-e9WxLR4DOP5XKMT4mflXVovZS4mVdiMkAFSDHF+6q80=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.6/vue-router.min.js" integrity="sha256-qWbGRKQmk3YxNsJymjkEIgwndQnomEoGwoe9wOy13r4=" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{% static "js/discussion.js" %}"></script>
<link rel="stylesheet" href="{% static 'style/discussion.css' %}" />
{% endblock %}

{% block subbreadcrumbs %}
<li><a href="{% url 'offering:course_info' course_slug=offering.slug %}">{{ offering.name }}</a></li>
<li>Discussion</li>
{% endblock %}

{% block content %}

<div id="discussion-container">{% verbatim vue %}
    <discussion-topic-list v-bind:topics="topics"></discussion-topic-list>
    <discussion-topic-main v-bind:topic="current_topic" v-if="current_topic !== null"></discussion-topic-main>
    <discussion-topic-replies v-bind:replies="current_replies"></discussion-topic-replies>
{% endverbatim vue %}</div>

{% endblock %}